!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Renderer",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"Layout",{enumerable:!0,get:function(){return a.default}});var i=r(n(1)),o=r(n(4)),a=r(n(5));Object.assign(PIXI.extras,{AwesomeText:o.default}),"undefined"!=typeof PIXI&&(PIXI.extras?PIXI.extras.AwesomeText=o.default:PIXI.extras={AwesomeText:o.default})},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?u(t):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var h=n(2),p=n(3),y=PIXI.glCore,v=function(t){function e(t){var n;return i(this,e),n=s(this,f(e).call(this,t)),n.shader=null,n}return l(e,t),a(e,[{key:"onContextChange",value:function(){var t=this.renderer.gl;t.getExtension("OES_standard_derivatives"),this.shader=new PIXI.Shader(t,h,p)}},{key:"render",value:function(t){t.styleID!==t.style.styleID&&t.update();var e=this.renderer,n=e.gl,r=t.texture,i=t._glDatas[e.CONTEXT_UID];i||(e.bindVao(null),i=this.buildGlData(t,n)),e.bindVao(i.vao),t.dirty!==i.dirty&&(i.dirty=t.dirty,i.uvBuffer.upload(t.uvs)),t.indexDirty!==i.indexDirty&&(i.indexDirty=t.indexDirty,i.indexBuffer.upload(t.indices)),i.vertexBuffer.upload(t.vertices),e.bindShader(i.shader),e.state.setBlendMode(t.blendMode),i.shader.uniforms.uSampler=e.bindTexture(r),i.shader.uniforms.translationMatrix=t.worldTransform.toArray(!0),i.shader.uniforms.hint_amount=1,i.shader.uniforms.subpixel_amount=1,i.shader.uniforms.font_color=PIXI.utils.hex2rgb(t.style.fill.replace("#","0x")),i.shader.uniforms.bg_color=PIXI.utils.hex2rgb(t.backgroundColor.replace("#","0x"));var o=t.drawMode=n.TRIANGLES;i.vao.draw(o,t.indices.length,0)}},{key:"buildGlData",value:function(t,e){var n={shader:this.shader,vertexBuffer:y.GLBuffer.createVertexBuffer(e,t.vertices,e.STREAM_DRAW),uvBuffer:y.GLBuffer.createVertexBuffer(e,t.uvs,e.STREAM_DRAW),sdfBuffer:y.GLBuffer.createVertexBuffer(e,t.sdfSizes,e.STATIC_DRAW),indexBuffer:y.GLBuffer.createIndexBuffer(e,t.indices,e.STATIC_DRAW),vao:null,dirty:t.dirty,indexDirty:t.indexDirty};return n.vao=new y.VertexArrayObject(e).addIndex(n.indexBuffer).addAttribute(n.vertexBuffer,n.shader.attributes.aVertexPosition,e.FLOAT,!1,8,0).addAttribute(n.uvBuffer,n.shader.attributes.aTextureCoord,e.FLOAT,!1,8,0).addAttribute(n.sdfBuffer,n.shader.attributes.aSdfSize,e.FLOAT,!1,4,0),n}}]),e}(PIXI.ObjectRenderer);d(v,"scale",1),PIXI.WebGLRenderer.registerPlugin("AwesomeTextRenderer",v);var g=v;e.default=g},function(t,e){t.exports="#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute float aSdfSize;\n\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\nuniform mat3 transform;\n\n\nvarying vec2  tc0;\nvarying float doffset;\nvarying float sdf_texel;\n\n\nvoid main(void) {\n\n    //TODO MAKE ATTRIBUTE\n    float sdf_size = aSdfSize;\n\n    //TODO MAKE UNIFORMS\n    float sdf_tex_size = 1024.0;\n\n\n    tc0 = aTextureCoord;\n    doffset = 1.0 / sdf_size;       // Distance field delta for one screen pixel\n    sdf_texel = 1.0 / sdf_tex_size;\n\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition , 1.0)).xy, 0.0, 1.0);\n\n}\n"},function(t,e){t.exports="#define GLSLIFY 1\nuniform sampler2D uSampler;\nuniform float hint_amount;\nuniform float subpixel_amount;\n\nuniform vec3 bg_color;\nuniform vec3 font_color;\n\nvarying vec2  tc0;\nvarying float doffset;\nvarying float sdf_texel;\n\n\n/*\n *  Subpixel coverage calculation\n *\n *  v - edge slope    -1.0 to 1.0          triplet\n *  a - pixel coverage 0.0 to 1.0          coverage\n *\n *      |<- glyph edge                      R  G  B\n *  +---+---+                             +--+--+--+\n *  |   |XXX| v = 1.0 (edge facing west)  |  |xx|XX|\n *  |   |XXX| a = 0.5 (50% coverage)      |  |xx|XX|\n *  |   |XXX|                             |  |xx|XX|\n *  +---+---+                             +--+--+--+\n *    pixel                                0  50 100\n *\n *\n *        R   G   B\n *\n *   1.0        +--+   <- top (abs( v ))\n *              |\n *       -+-----+--+-- <- ceil: 100% coverage\n *        |     |XX|\n *   0.0  |  +--+XX|\n *        |  |xx|XX|\n *       -+--+--+--+-- <- floor: 0% coverage\n *           |\n *  -1.0  +--+         <-  -abs(v)\n *        |\n *        |\n *        |\n *  -2.0  +            <- bottom: -abs(v)-1.0\n */\n\nvec3 subpixel( float v, float a ) {\n    float vt      = 0.6 * v; // 1.0 will make your eyes bleed\n    vec3  rgb_max = vec3( -vt, 0.0, vt );\n    float top     = abs( vt );\n    float bottom  = -top - 1.0;\n    float cfloor  = mix( top, bottom, a );\n    vec3  res     = clamp( rgb_max - vec3( cfloor ), 0.0, 1.0 );\n    return res;\n}\n\nvoid main2() {\n    gl_FragColor = texture2D(uSampler, tc0);\n}\n\nvoid main(void) {\n\n    // Sampling the texture, L pattern\n    float sdf       = texture2D( uSampler, tc0 ).r;\n    float sdf_north = texture2D( uSampler, tc0 + vec2( 0.0, sdf_texel ) ).r;\n    float sdf_east  = texture2D( uSampler, tc0 + vec2( sdf_texel, 0.0 ) ).r;\n\n    // Estimating stroke direction by the distance field gradient vector\n    vec2  sgrad     = vec2( sdf_east - sdf, sdf_north - sdf );\n    float sgrad_len = max( length( sgrad ), 1.0 / 128.0 );\n    vec2  grad      = sgrad / vec2( sgrad_len );\n    float vgrad = abs( grad.y ); // 0.0 - vertical stroke, 1.0 - horizontal one\n\n    float horz_scale  = 1.1; // Blurring vertical strokes along the X axis a bit\n    float vert_scale  = 0.6; // While adding some contrast to the horizontal strokes\n    float hdoffset    = mix( doffset * horz_scale, doffset * vert_scale, vgrad );\n    float res_doffset = mix( doffset, hdoffset, hint_amount );\n\n    float alpha       = smoothstep( 0.5 - res_doffset, 0.5 + res_doffset, sdf );\n\n    // Additional contrast\n    alpha             = pow( alpha, 1.0 + 0.2 * vgrad * hint_amount );\n\n    // Unfortunately there is no support for ARB_blend_func_extended in WebGL.\n    // Fortunately the background is filled with a solid color so we can do\n    // the blending inside the shader.\n\n    // Discarding pixels beyond a threshold to minimise possible artifacts.\n    if ( alpha < 20.0 / 256.0 ) discard;\n\n    vec3 channels = subpixel( grad.x * 0.5 * subpixel_amount, alpha ) + 0.1;\n\n    // For subpixel rendering we have to blend each color channel separately\n    vec3 res = mix( bg_color, font_color, channels );\n    gl_FragColor = vec4( res, 1.0 );\n}\n\n\n"},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var p=r(n(5)),y=n(6),v=function(t){function e(t,n,r){var i;return o(this,e),i=u(this,l(e).call(this,r.texture)),i.style=new PIXI.TextStyle(n),i.backgroundColor=n.backgroundColor,i._text=t,i._font=r.font,i._texture=r.texture,i.pluginName="AwesomeTextRenderer",i}return c(e,t),s(e,[{key:"update",value:function(){var t=this;this.layout=new p.default(this.text,this.font,{fontSize:this.style.fontSize,wrapWords:this.style.breakWords,wrapperWidth:this.style.wordWrapWidth,align:this.style.align,lineHeight:this.style.lineHeight}),this.metrics=this.fontMetrics(this.font,this.style.fontSize,.2*this.style.fontSize),this.vertices=new Float32Array(4*this.layout.lettersCount*2),this.uvs=new Float32Array(4*this.layout.lettersCount*2),this.sdfSizes=new Float32Array(4*this.layout.lettersCount),this.arrayPositions={vertex:0,uvs:0,sdf:0},this.layout.wordsMetrics.forEach(function(e){t.writeString(e.word,t.font,t.metrics,[e.x,e.y])}),this.indices=y({clockwise:!0,type:"uint16",count:this.layout.lettersCount}),this.styleID=this.style.styleID,this.dirty++,this.indexDirty++}},{key:"writeString",value:function(t,e,n,r){for(var i=this,o=" ",a=r,s=0,u=n.cap_scale,f=0;f!==t.length;){var l=t[f];if(f++,"\n"!==l)if(" "!==l){var c=e.chars[l];c||(l="?",c=e.chars["?"]);var d=e.kern[o+l];d||(d=0);var h=this.charRect(a,e,n,c,d);h.positions.map(function(t){return i.vertices[i.arrayPositions.vertex++]=t}),h.uvs.map(function(t){return i.uvs[i.arrayPositions.uvs++]=t}),h.sdfSizes.map(function(t){return i.sdfSizes[i.arrayPositions.sdf++]=t}),o=l,a=h.pos}else a[0]+=e.space_advance*u,o=" ";else a[0]>s&&(s=a[0]),a[0]=r[0],a[1]-=n.line_height,o=" "}return{rect:[r[0],r[1],s-r[0],r[1]-a[1]+n.line_height],string_pos:f}}},{key:"fontMetrics",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e/t.cap_height,i=Math.round(t.x_height*r)/t.x_height,o=Math.round(t.ascent*r),a=Math.round(r*(t.ascent+t.descent+t.line_gap)+n);return{cap_scale:r,low_scale:i,pixel_size:e,ascent:o,line_height:a}}},{key:"charRect",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=1===(1&r.flags),a=t[1]-n.ascent,s=o?n.low_scale:n.cap_scale,u=r.rect,f=a-s*(e.descent+e.iy),l=f+s*e.row_height,c=t[0]+s*(r.bearing_x+i-e.ix),d=c+s*(u[2]-u[0]),h=[c,l,d,f],p=t[0]+s*r.advance_x,y=2*e.iy*s,v=[h[0],h[3],h[2],h[3],h[2],h[1],h[0],h[1]],g=[u[0],u[1],u[2],u[1],u[2],u[3],u[0],u[3]],b=[y,y,y,y];return{positions:v,uvs:g,sdfSizes:b,pos:[p,t[1]]}}},{key:"text",get:function(){return this._text},set:function(t){this._text=t,this.update()}},{key:"texture",get:function(){return this._texture}},{key:"font",get:function(){return this._font}}]),e}(PIXI.mesh.Mesh);h(v,"scale",1);var g=v;e.default=g},function(t,e){"use strict";function n(){return n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n.apply(this,arguments)}function r(t){return a(t)||o(t)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function a(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=function(){function t(e,n,r){s(this,t),l(this,"text",""),l(this,"font",null),l(this,"metrics",null),l(this,"fontSize",20),l(this,"align","left"),l(this,"startX",0),l(this,"startY",0),l(this,"wrapperWidth",100),l(this,"wrapWords",!1),l(this,"wordsMetrics",[]),l(this,"lettersCount",0),l(this,"height",0),l(this,"linesCount",0),l(this,"lineHeight",0),this.text=e,this.font=n,this.fontSize=r.fontSize,this.wrapWords=r.wrapWords,this.wrapperWidth=r.wrapperWidth,this.lineHeight=r.lineHeight,this.align=r.align,this.lettersCount=this.text.split("").length,this.metrics=this.fontMetrics(n,0),this.startY=this.metrics.lineHeight,this.calculateWordsPositions()}return f(t,[{key:"fontMetrics",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.font,r=n.cap_height,i=n.x_height,o=n.ascent,a=n.descent,s=n.line_gap,u=this.fontSize/r,f=Math.round(i*u)/i,l=Math.round(o*u),c=Math.round(u*(o+a+s)+e);return this.lineHeight>0?c=this.lineHeight:this.lineHeight=c,{capScale:u,lowScale:f,ascent:l,lineHeight:c}}},{key:"charRect",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.metrics,i=r.ascent,o=r.lowScale,a=r.capScale,s=this.font,u=s.descent,f=s.row_height,l=s.iy,c=s.ix,d=e.flags,h=e.bearing_x,p=e.advance_x,y=e.rect,v=1===(1&d),g=t[1]-i,b=v?o:a,x=y,_=g-b*(u+l),m=_+b*f,w=t[0]+b*(h+n-c),S=w+b*(x[2]-x[0]),O=[w,m,S,_],A=t[0]+b*p,P=2*l*b,I=[O[0],O[3],O[2],O[3],O[2],O[1],O[0],O[1]],X=[x[0],x[1],x[2],x[1],x[2],x[3],x[0],x[3]],j=[P,P,P,P];return{positions:I,uvs:X,sdfSizes:j,pos:[A,t[1]]}}},{key:"getStringSize",value:function(t){var e=this,n=0,i=this.metrics.lineHeight,o=r(t);return o.forEach(function(t){var r=e.font.chars[t];if(" "===t)return void(n+=e.font.space_advance*e.metrics.capScale);var i=e.charRect([n,0],r,.2);n=i.pos[0]}),{width:n,height:i}}},{key:"calculateWordsPositions",value:function(){var t=this,e=this.text.split(" ");this.wordsMetrics=[];var r=this.startX,i=this.startY;e.forEach(function(e){var o=t.getStringSize(e);r+o.width>t.startX+t.wrapperWidth&&t.wrapWords&&(r=t.startX,i+=o.height),t.wordsMetrics.push(n({},o,{x:r,y:i,word:e})),r+=o.width+t.font.space_advance*t.metrics.capScale}),this.linesCount=(i-this.startY)/this.metrics.lineHeight+1,this.height=this.linesCount*this.metrics.lineHeight;for(var o=function(e){var n=t.wordsMetrics.filter(function(n){return n.y===t.startY+e*t.metrics.lineHeight}),r=n[n.length-1],i=t.startX+t.wrapperWidth-(r.x+r.width),o=0;switch(t.align){case"center":o=i/2;break;case"right":o=i}t.wordsMetrics.forEach(function(n){n.y===t.startY+e*t.metrics.lineHeight&&(n.x+=o)})},a=0;a<this.linesCount;++a)o(a)}}]),t}(),d=c;e.default=d},function(t,e,n){var r=n(7),i=n(8),o=n(9),a=[0,2,3],s=[2,1,3];t.exports=function(t,e){t&&(i(t)||o(t))||(e=t||{},t=null),e="number"==typeof e?{count:e}:e||{};for(var n="string"==typeof e.type?e.type:"uint16",u="number"==typeof e.count?e.count:1,f=e.start||0,l=e.clockwise!==!1?a:s,c=l[0],d=l[1],h=l[2],p=6*u,y=t||new(r(n))(p),v=0,g=0;v<p;v+=6,g+=4){var b=v+f;y[b+0]=g+0,y[b+1]=g+1,y[b+2]=g+2,y[b+3]=g+c,y[b+4]=g+d,y[b+5]=g+h}return y}},function(t,e){t.exports=function(t){switch(t){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},function(t,e){function n(t){return t.BYTES_PER_ELEMENT&&"[object ArrayBuffer]"===r.call(t.buffer)||Array.isArray(t)}var r=Object.prototype.toString;t.exports=n},function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function r(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}t.exports=function(t){return null!=t&&(n(t)||r(t)||!!t._isBuffer)}}]);